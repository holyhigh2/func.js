const f=(r,e)=>e.split(".").reduce((t,s)=>t&&t[s],r),a=(r,e)=>Object.keys(r).filter(e).reduce((t,s)=>Object.assign(t,{[s]:r[s]}),{}),d=r=>e=>Array.isArray(e)?e.map(t=>r(t)):r(e),p=r=>{const e=[],t=[];for(const s of r)["$","_"].includes(s)?e.push(s):t.push(s);return{prefixes:e,properties:t}},w=(r=[])=>e=>{if(r.length===0||!e)return e;const{prefixes:t,properties:s}=p(r);return a(e,o=>!s.includes(o)&&!t.includes(o[0]))},h=(r=[])=>e=>{if(r.length===0||!e)return e;const{prefixes:t,properties:s}=p(r);return a(e,o=>s.includes(o)||t.includes(o[0]))},g=(r,e)=>{const t=new Intl.Collator(e.$locale,{numeric:e.$numeric,caseFirst:e.$caseFirst,sensitivity:e.$sensitivity}),s=Object.keys(e).filter(o=>!o.startsWith("$"));for(const o of s)r=r.sort((n,u)=>{const i=[f(n,o),f(u,o)].map(l=>{if(l!==null)return l instanceof Date?l.toISOString():l});return e[o]===-1&&i.reverse(),t.compare(i[0],i[1])});return r},m=(r,e="Expected an array")=>{if(!Array.isArray(r))throw new TypeError(e)},c=r=>Array.isArray(r)?r:r?[r]:[],y=["sort","where","only","without"],A=(r,e)=>{const t={...e};for(const n of y)t[n]&&(t[n]=c(t[n]));const s=(n,u=i=>i)=>(...i)=>(t[n]=u(...i),o),o={params:()=>t,only:s("only",c),without:s("without",c),where:s("where",n=>[...c(t.where),n]),sort:s("sort",n=>[...c(t.sort),...c(n)]),limit:s("limit",n=>parseInt(String(n),10)),skip:s("skip",n=>parseInt(String(n),10)),find:()=>r(o),findOne:()=>(t.first=!0,r(o)),findSurround:(n,u)=>(t.surround={query:n,...u},r(o)),locale:n=>o.where({_locale:n})};return o};var O=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}export{O as a,f as b,A as c,m as d,c as e,d as f,$ as g,h,g as s,w};
